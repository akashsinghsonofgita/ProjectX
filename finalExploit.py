from datetime import datetime
from time import sleep
from threading import Thread
import sendIt
import replicator
from logger import logger


def checkTime():
    while True:
        now = datetime.now()
        today9_pm = now.replace(hour=21, minute=0, second=0, microsecond=0)
        today9_hl_pm = now.replace(hour=21, minute=30, second=0, microsecond=0)
        if now < today9_pm:
            sleep(1200)
        elif now >= today9_pm and now < today9_hl_pm:
            sendIt.ftp()
            break


def main():
    replicator.replicate()
    t1 = Thread(target=logger)
    t2 = Thread(target=checkTime)
    t1.start()
    t2.start()


if __name__ == "__main__":
    main()